"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4195],{2312:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>r,contentTitle:()=>o,default:()=>c,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"guides/vault-losses-and-collateral-de-pegging","title":"Vault Losses and Collateral De-pegging","description":"Vault losses and collateral de-pegging events are two scenarios that can create a loss of alAsset backing, thus jeopardizing the health of the protocol. Vault losses are caused by the underlying yield strategy returning less of the underlying token than expected - for example, a strategy that is meant to earn 10% APR on ETH suddenly only being worth 0.9 ETH per 1 ETH deposited. Collateral de-pegging is caused by the underlying collateral being worth less than its expected value. This is only applicable to alUSD as it is the only alchemist that accepts multiple collateral types. For example, if USDT were to be worth $0.9 relative to DAI and USDC each being worth $1. This is not relevant to ETH as 1 ETH will always be worth 1 ETH.","source":"@site/docs/user/guides/vault-losses-and-collateral-de-pegging.md","sourceDirName":"guides","slug":"/guides/vault-losses-and-collateral-de-pegging","permalink":"/alchemix-v3-docs/user/guides/vault-losses-and-collateral-de-pegging","draft":false,"unlisted":false,"editUrl":"https://github.com/keenanlukeom/alchemix-v3-docs/edit/main/docs/user/docs/user/guides/vault-losses-and-collateral-de-pegging.md","tags":[],"version":"current","frontMatter":{"cover":"../../.gitbook/assets/header_02_test.png","coverY":0,"layout":{"cover":{"visible":true,"size":"hero"},"title":{"visible":true},"description":{"visible":true},"tableOfContents":{"visible":true},"outline":{"visible":true},"pagination":{"visible":true}}},"sidebar":"tutorialSidebar","previous":{"title":"The Transmuter, Elaborated","permalink":"/alchemix-v3-docs/user/guides/the-transmuter-elaborated"},"next":{"title":"How to","permalink":"/alchemix-v3-docs/user/how-to/"}}');var l=s(4848),n=s(8453);const a={cover:"../../.gitbook/assets/header_02_test.png",coverY:0,layout:{cover:{visible:!0,size:"hero"},title:{visible:!0},description:{visible:!0},tableOfContents:{visible:!0},outline:{visible:!0},pagination:{visible:!0}}},o="Vault Losses and Collateral De-pegging",r={},d=[{value:"Vault Loss Scenario <a></a>",id:"vault-loss-scenario-",level:3},{value:"Collateral De-pegging <a></a>",id:"collateral-de-pegging-",level:3}];function h(e){const t={a:"a",code:"code",h1:"h1",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.header,{children:(0,l.jsx)(t.h1,{id:"vault-losses-and-collateral-de-pegging",children:"Vault Losses and Collateral De-pegging"})}),"\n",(0,l.jsx)(t.p,{children:"Vault losses and collateral de-pegging events are two scenarios that can create a loss of alAsset backing, thus jeopardizing the health of the protocol. Vault losses are caused by the underlying yield strategy returning less of the underlying token than expected - for example, a strategy that is meant to earn 10% APR on ETH suddenly only being worth 0.9 ETH per 1 ETH deposited. Collateral de-pegging is caused by the underlying collateral being worth less than its expected value. This is only applicable to alUSD as it is the only alchemist that accepts multiple collateral types. For example, if USDT were to be worth $0.9 relative to DAI and USDC each being worth $1. This is not relevant to ETH as 1 ETH will always be worth 1 ETH."}),"\n",(0,l.jsxs)(t.p,{children:["Vault losses are handled automatically through the ",(0,l.jsx)(t.code,{children:"maxloss()"})," parameter. Collateral de-pegging is handled manually through sentinels' ability to pause tokens (see ",(0,l.jsx)(t.a,{href:"https://alchemix-finance.gitbook.io/user-docs/alchemix-dao/the-alchemix-dao/governance-process/multisig-admin-rights",children:"Multisig Admin Rights"}),"). See below for an example scenario where a yield-bearing asset experiences a 10% loss in underlying collateral, and another scenario where DAI drops to $0.80 relative to USDC and USDT."]}),"\n",(0,l.jsxs)(t.h3,{id:"vault-loss-scenario-",children:["Vault Loss Scenario ",(0,l.jsx)("a",{href:"#vault-loss-scenario",id:"vault-loss-scenario"})]}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"Scenario:"})," A yield-bearing asset experiences a loss in the underlying collateral. For this example, we will assume a 10% loss of DAI from the yvDAI vault that is unrecoverable."]}),"\n",(0,l.jsxs)(t.p,{children:["After the transaction that causes the loss is committed to the chain, the ",(0,l.jsx)(t.code,{children:"maxloss()"})," is triggered and the following happens:"]}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:["The following yvDAI Alchemist functions are automatically disabled:","\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.code,{children:"deposit()"})}),"\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.code,{children:"depositUnderlying()"})}),"\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.code,{children:"withdrawUnderlying()"})}),"\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.code,{children:"withdrawUnderlyingFrom()"})}),"\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.code,{children:"liquidate()"})}),"\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.code,{children:"harvest()"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["The following yvDAI Alchemist functions are still useable:","\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.code,{children:"withdraw()"})}),"\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.code,{children:"withdrawFrom()"})}),"\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.code,{children:"repay()"})}),"\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.code,{children:"mint()"})}),"\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.code,{children:"burn()"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"Resolution:"})," In order to re-enable the disabled functions, the following needs to happen:"]}),"\n",(0,l.jsxs)(t.ol,{children:["\n",(0,l.jsxs)(t.li,{children:["A proposal is created to call ",(0,l.jsx)(t.code,{children:"snap()"})," on the Alchemist, targeting the yvDAI vault."]}),"\n",(0,l.jsx)(t.li,{children:"A vote takes place (we assume it passes)"}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.code,{children:"snap()"})," is called on the Alchemist, which accepts the 10% loss and resets the expected value of those yield tokens held in the Alchemist"]}),"\n"]}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"Damage:"})," The maximum damage is the total amount of funds lost from the vault. alUSD will still be overcollateralized and depositors will experience the loss, the same way they would experience the loss if they held the tokens outside of Alchemix or if they used ",(0,l.jsx)(t.code,{children:"withdraw()"})," after ",(0,l.jsx)(t.code,{children:"maxloss()"})," was triggered. The effective rate of yield flow to the transmuter buffer would also be slightly slower, as there would be slightly less collateral in the system earning yield relative to the alAsset supply. Note that if a loss of >50% were realized, this could lead to a loss in backing for alUSD."]}),"\n",(0,l.jsx)(t.p,{children:"While the risk of a vault losing collateral is low, the damage is still significant. However, Alchemix does not control the operations of 3rd party vaults, so the only way to minimize the risk is to carefully consider which yield-bearing strategies are added."}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"Necessary Response Time:"})," The response time for this scenario does not need to be necessarily fast, because the functions that are affected by a vault loss will be automatically disabled. The team and the DAO should assess the loss to make sure that it is unrecoverable before taking the governance steps to remedy the situation by calling ",(0,l.jsx)(t.code,{children:"snap()"}),"."]}),"\n",(0,l.jsxs)(t.h3,{id:"collateral-de-pegging-",children:["Collateral De-pegging ",(0,l.jsx)("a",{href:"#collateral-de-pegging",id:"collateral-de-pegging"})]}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"Scenario:"})," One collateral token used by the Alchemist experiences a severe de-pegging against other collateral. For this example, we will assume DAI drops to 80 cents vs USDC & USDT. alUSD maintains its peg against USDC & USDT."]}),"\n",(0,l.jsx)(t.p,{children:"This de-pegging presents multiple arbitrage opportunities:"}),"\n",(0,l.jsxs)(t.ol,{children:["\n",(0,l.jsx)(t.li,{children:"Users can buy DAI off the market, deposit it into the Alchemist, take a loan, and repeat this loop until the minting cap is reached."}),"\n",(0,l.jsx)(t.li,{children:"Users can buy DAI off the market and use it to repay their loans until the repay cap is reached."}),"\n",(0,l.jsx)(t.li,{children:"Users can liquidate their current yDAI position (paying off their outstanding debt at a discount), buy more DAI with their loan, deposit it into the Alchemist, take a loan, and repeat until the liquidation cap is reached."}),"\n"]}),"\n",(0,l.jsx)(t.p,{children:"These arbitrage opportunities will likely result in one or more of the mint / repay / liquidate caps being met."}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"Resolution:"})," The only resolution that matters is getting DAI to reach peg again. This can take multiple avenues."]}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:"The peg could re-stabilize on its own without any intervention."}),"\n",(0,l.jsxs)(t.li,{children:["The collateral in question can be disabled by a sentinel or admin, buying the peg more time to re-stabilize. This would disable the following functions:","\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.code,{children:"deposit()"})}),"\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.code,{children:"depositUnderlying()"})}),"\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.code,{children:"repay()"})}),"\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.code,{children:"liquidate()"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"Damage:"})," The de-pegging of DAI results in the price of the alAsset dropping towards the de-pegged asset. The sentinels exist to disable underlying tokens as soon as they experience a de-pegging event. The repay, liquidate, and mint caps are in place to limit the amount of de-pegging of the synthetic asset that can occur prior to sentinel action."]}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"Risk:"})," Given the interconnected nature of underlying collateral tokens and DeFi at large, there will likely be consistent, small arbitrage opportunities between collaterals and their pegged synthetics. In times of high volatility, these arbitrage opportunities can get exasperated as assets experience larger and longer de-pegging events. As a result, there is some risk that the repay/liquidate/mint caps get reached."]}),"\n",(0,l.jsx)(t.p,{children:"Note that if the peg does not restabilize, DAI would remain paused; there will be a loss in the backing of alUSD. The DAO will need to determine how to proceed in this scenario."}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"Necessary Response Time:"})," The faster a sentinel can respond by disabling the de-pegged underlying token, the less the price of alAsset will be arbitraged down."]}),"\n",(0,l.jsx)("figure",{children:(0,l.jsx)("img",{src:"../../.gitbook/assets/header_02_test.png",alt:""})})]})}function c(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>a,x:()=>o});var i=s(6540);const l={},n=i.createContext(l);function a(e){const t=i.useContext(n);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),i.createElement(n.Provider,{value:t},e.children)}}}]);